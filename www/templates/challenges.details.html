<ion-view title="Challenge Details">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-content class="has-header main">

    <ul class="list card">
      <div class="item" style="padding: 0px;">
        <!--<img src="mcfly.jpg">-->
        <div class="row">
          <div class="col">
            <img src="{{selectedChallenge.requestingUser.avatar}}" width="50px"/>
          </div>
          <div class="col" style="text-align: center;">
            <h3><strong>versus</strong></h3>
          </div>
          <div class="col" style="text-align: right;">
            <img src="{{selectedChallenge.requestedUser.avatar}}" width="50px"/>
          </div>
        </div>
      </div>

      <div class="item item-body">
        <h4>Kategorie: {{selectedChallenge.sport.name}}</h4>
        <h4>Aufgabe: {{selectedChallenge.exercise.name}}</h4>
        <h4>Wert: {{selectedChallenge.exerciseValue}}</h4>
        <h4>Status: {{selectedChallenge.status}}</h4>
        <h4>Ablaufdatum: {{selectedChallenge.expireDate | date:'dd.MM.yyyy - HH:mm'}} Uhr</h4>

        <div class="row" style="padding: 0px;">
          <div class="col" style="padding: 0px;">
            <img src="data:image/jpeg;base64,{{selectedChallenge.proofImageAsString}}"
                 ng-if="selectedChallenge.proofImageAsString" width="100%" />
          </div>
        </div>
      </div>

      <div class="item tabs tabs-secondary tabs-icon-left"
           ng-if="selectedChallenge.status != 'DENIED' || selectedChallenge.status != 'TOBEPROOFED'">
        <!-- Aktzeptieren oder Ablehnen -->
        <a class="tab-item" href=""
           ng-if="selectedChallenge.status === 'WAITING' && selectedChallenge.requestedUser.nickname === profile.nickname"
           ng-click="updateStatus('ACCEPTED', 'NONE')">
          <i class="icon ion-checkmark-round"></i>
          Aktzeptieren
        </a>
        <a class="tab-item" href=""
           ng-if="selectedChallenge.status === 'WAITING' && selectedChallenge.requestedUser.nickname === profile.nickname"
           ng-click="updateStatus('DENIED', 'NONE')">
          <i class="icon ion-close-round"></i>
          Ablehnen
        </a>

        <!-- Abschließen oder Aufgeben -->
        <a class="tab-item" href=""
           ng-if="selectedChallenge.status === 'ACCEPTED' && selectedChallenge.requestedUser.nickname === profile.nickname"
           ng-click="getPicture()">
          <i class="icon ion-ribbon-a"></i>
          Abschließen
        </a>
        <a class="tab-item" href=""
           ng-if="selectedChallenge.status === 'ACCEPTED' && selectedChallenge.requestedUser.nickname === profile.nickname"
           ng-click="updateStatus('DENIED', 'NONE')">
          <i class="icon ion-flag"></i>
          Aufgeben
        </a>

        <!-- Bestätigen oder Ablehnen -->
        <a class="tab-item" href=""
           ng-if="selectedChallenge.status === 'TOBEPROOFED' && selectedChallenge.requestingUser.nickname === profile.nickname"
           ng-click="updateStatus('PASSED', 'REQUESTED')">
          <i class="icon ion-checkmark-round"></i>
          Bestätigen
        </a>
        <a class="tab-item" href=""
           ng-if="selectedChallenge.status === 'TOBEPROOFED' && selectedChallenge.requestingUser.nickname === profile.nickname"
           ng-click="updateStatus('DENIED', 'REQUESTING')">
          <i class="icon ion-close-round"></i>
          Ablehnen
        </a>
        <!--<a class="tab-item" href="#">-->
        <!--<i class="icon ion-share"></i>-->
        <!--Share-->
        <!--</a>-->
      </div>
    </ul>

  </ion-content>
</ion-view>
